directories:
  output: dist
  buildResources: build
appId: ai.flojoy.studio
productName: Flojoy Studio
icon: public/favicon.ico
asar: true
afterSign: scripts/notarize.js
files:
  - dist-electron/**/*

extraResources:
  - from: "public"
    to: "public"
  - from: "scripts/backend.ps1"
    to: "backend/backend.ps1"
  - from: "scripts/backend.sh"
    to: "backend/backend.sh"
  - from: "scripts/conda_install.sh"
    to: "backend/conda_install.sh"
  - from: "scripts/conda_install.ps1"
    to: "backend/conda_install.ps1"
  - from: "captain"
    to: "backend/captain"
  - from: "pkgs"
    to: "backend/pkgs"
  - from: "PYTHON"
    to: "backend/PYTHON"
    filter: "!**/nodes/**"
  - from: "manage.py"
    to: "backend/manage.py"
  - from: "pyproject.toml"
    to: "backend/pyproject.toml"
  - from: "poetry.lock"
    to: "backend/poetry.lock"
  - from: "environment.yml"
    to: "backend/environment.yml"

mac:
  icon: public/favicon.icns
  target:
    - dmg
    - zip
  entitlements: ./entitlements.mac.plist
  entitlementsInherit: ./entitlements.mac.plist
  darkModeSupport: true
  gatekeeperAssess: false
  hardenedRuntime: true
  notarize: false # we have separate script (scripts/notarize.js) for this
  x64ArchFiles: "*" # TODO: Remove this hack

linux:
  icon: public/favicon.icns
  target:
    - deb
    - AppImage

win:
  icon: public/favicon.ico
extraMetadata:
  main: dist-electron/main/index.js
extends: null

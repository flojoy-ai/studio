import { useMantineTheme } from "@mantine/core";
import { SVGProps } from "react";
import { BGTemplate } from "../../svgs/histo-scatter-svg";

const HistoTitle = ({ ...props }: SVGProps<SVGSVGElement>) => {
  const theme = useMantineTheme();
  return (
    <svg
      width="129"
      height="16"
      viewBox="0 0 129 16"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      {...props}
    >
      <path
        d="M12.0421 15.0963H9.02451V8.93414H3.37021V15.0963H0.342865V0.818909H3.37021V6.41461H9.02451V0.818909H12.0421V15.0963ZM17.0554 15.0963V0.818909H20.0827V15.0963H17.0554ZM33.5042 11.1314C33.5042 11.9778 33.2991 12.7134 32.889 13.3384C32.4788 13.9634 31.8798 14.4452 31.0921 14.7838C30.3108 15.1223 29.3603 15.2916 28.2405 15.2916C27.7457 15.2916 27.2607 15.259 26.7854 15.1939C26.3167 15.1288 25.8642 15.0344 25.428 14.9107C24.9983 14.7805 24.5882 14.621 24.1976 14.4322V11.6197C24.8746 11.9192 25.5778 12.1894 26.3069 12.4302C27.0361 12.6711 27.7587 12.7916 28.4749 12.7916C28.9697 12.7916 29.3668 12.7265 29.6663 12.5963C29.9723 12.466 30.1936 12.287 30.3304 12.0591C30.4671 11.8313 30.5354 11.5709 30.5354 11.2779C30.5354 10.9198 30.415 10.6138 30.1741 10.3599C29.9332 10.106 29.6012 9.86839 29.178 9.64703C28.7614 9.42568 28.2893 9.18805 27.762 8.93414C27.43 8.77789 27.0686 8.58909 26.678 8.36774C26.2874 8.13987 25.9163 7.86318 25.5647 7.53766C25.2132 7.21214 24.9235 6.81826 24.6956 6.35602C24.4742 5.88727 24.3636 5.32737 24.3636 4.67633C24.3636 3.82347 24.5589 3.0943 24.9495 2.48883C25.3401 1.88336 25.8968 1.42112 26.6194 1.10211C27.3486 0.776591 28.208 0.613831 29.1976 0.613831C29.9397 0.613831 30.6461 0.701721 31.3167 0.877502C31.9938 1.04677 32.7002 1.29417 33.4358 1.61969L32.4593 3.97321C31.8017 3.70628 31.2125 3.5012 30.6917 3.35797C30.1709 3.20823 29.6403 3.13336 29.0999 3.13336C28.7223 3.13336 28.4 3.19521 28.1331 3.31891C27.8662 3.4361 27.6643 3.60537 27.5276 3.82672C27.3909 4.04156 27.3226 4.29222 27.3226 4.57867C27.3226 4.91722 27.4202 5.20367 27.6155 5.43805C27.8173 5.66591 28.1168 5.88727 28.514 6.10211C28.9176 6.31696 29.4189 6.56761 30.0179 6.85406C30.747 7.19912 31.3688 7.56045 31.8831 7.93805C32.4039 8.30914 32.8043 8.7486 33.0843 9.25641C33.3642 9.75771 33.5042 10.3827 33.5042 11.1314ZM42.9999 15.0963H39.9726V3.33844H36.0956V0.818909H46.8769V3.33844H42.9999V15.0963ZM63.4331 7.93805C63.4331 9.03831 63.2964 10.0409 63.0229 10.9459C62.7495 11.8443 62.3328 12.619 61.7729 13.2701C61.2196 13.9211 60.5164 14.4224 59.6636 14.774C58.8107 15.119 57.8016 15.2916 56.6362 15.2916C55.4709 15.2916 54.4617 15.119 53.6089 14.774C52.756 14.4224 52.0496 13.9211 51.4897 13.2701C50.9364 12.619 50.5229 11.841 50.2495 10.9361C49.9761 10.0311 49.8393 9.02529 49.8393 7.91852C49.8393 6.44065 50.0802 5.15485 50.562 4.0611C51.0503 2.96084 51.799 2.10797 52.8081 1.5025C53.8172 0.897034 55.0998 0.594299 56.6558 0.594299C58.2052 0.594299 59.478 0.897034 60.4741 1.5025C61.4767 2.10797 62.2189 2.96084 62.7007 4.0611C63.189 5.16136 63.4331 6.45367 63.4331 7.93805ZM53.0132 7.93805C53.0132 8.93414 53.1369 9.79352 53.3843 10.5162C53.6382 11.2323 54.0321 11.7857 54.5659 12.1763C55.0998 12.5604 55.7899 12.7525 56.6362 12.7525C57.4956 12.7525 58.1922 12.5604 58.7261 12.1763C59.2599 11.7857 59.6473 11.2323 59.8882 10.5162C60.1356 9.79352 60.2593 8.93414 60.2593 7.93805C60.2593 6.44065 59.9793 5.26227 59.4194 4.40289C58.8595 3.54352 57.9383 3.11383 56.6558 3.11383C55.8029 3.11383 55.1063 3.30914 54.5659 3.69977C54.0321 4.08388 53.6382 4.63727 53.3843 5.35992C53.1369 6.07607 53.0132 6.93545 53.0132 7.93805ZM73.212 7.07867H78.8761V14.481C78.1274 14.7284 77.3494 14.927 76.5421 15.0767C75.7348 15.22 74.8201 15.2916 73.7979 15.2916C72.3787 15.2916 71.1742 15.0116 70.1847 14.4517C69.1951 13.8918 68.4431 13.065 67.9288 11.9713C67.4145 10.8775 67.1573 9.5331 67.1573 7.93805C67.1573 6.44065 67.4438 5.14508 68.0167 4.05133C68.5961 2.95758 69.4392 2.11123 70.546 1.51227C71.6593 0.91331 73.0167 0.613831 74.6183 0.613831C75.3735 0.613831 76.1189 0.695211 76.8546 0.857971C77.5903 1.02073 78.2576 1.23232 78.8565 1.49274L77.8507 3.91461C77.4145 3.69326 76.9164 3.50771 76.3565 3.35797C75.7966 3.20823 75.2107 3.13336 74.5987 3.13336C73.7198 3.13336 72.9548 3.33518 72.3038 3.73883C71.6593 4.14248 71.158 4.70888 70.7999 5.43805C70.4483 6.16071 70.2726 7.01357 70.2726 7.99664C70.2726 8.92763 70.3995 9.75446 70.6534 10.4771C70.9073 11.1933 71.3077 11.7564 71.8546 12.1666C72.4015 12.5702 73.1143 12.772 73.9933 12.772C74.4229 12.772 74.7843 12.7525 75.0772 12.7134C75.3767 12.6679 75.6567 12.6223 75.9171 12.5767V9.59821H73.212V7.07867ZM87.8444 0.818909C89.14 0.818909 90.2077 0.975159 91.0476 1.28766C91.8939 1.60016 92.5222 2.07216 92.9323 2.70367C93.3425 3.33518 93.5476 4.13271 93.5476 5.09625C93.5476 5.74729 93.4239 6.31696 93.1765 6.80524C92.9291 7.29352 92.6035 7.70693 92.1999 8.04547C91.7963 8.38401 91.3601 8.66071 90.8913 8.87555L95.0905 15.0963H91.7311L88.3229 9.61774H86.7116V15.0963H83.6843V0.818909H87.8444ZM87.6296 3.29938H86.7116V7.1568H87.6882C88.6908 7.1568 89.4069 6.99078 89.8366 6.65875C90.2728 6.32021 90.4909 5.82542 90.4909 5.17438C90.4909 4.49729 90.2565 4.01552 89.7878 3.72906C89.3255 3.44261 88.6061 3.29938 87.6296 3.29938ZM107.028 15.0963L105.992 11.6978H100.787L99.7522 15.0963H96.4905L101.53 0.760315H105.231L110.289 15.0963H107.028ZM105.27 9.15875L104.235 5.83844C104.17 5.61709 104.082 5.33388 103.971 4.98883C103.867 4.63727 103.759 4.28245 103.649 3.92438C103.545 3.55979 103.46 3.24404 103.395 2.97711C103.33 3.24404 103.239 3.57607 103.121 3.97321C103.011 4.36383 102.903 4.73492 102.799 5.08649C102.695 5.43805 102.62 5.6887 102.575 5.83844L101.549 9.15875H105.27ZM119.541 15.0963L116.103 3.89508H116.016C116.029 4.16201 116.048 4.56565 116.074 5.10602C116.107 5.63987 116.136 6.20953 116.162 6.815C116.188 7.42047 116.201 7.96735 116.201 8.45563V15.0963H113.496V0.818909H117.617L120.996 11.7369H121.055L124.639 0.818909H128.76V15.0963H125.937V8.33844C125.937 7.88922 125.944 7.37164 125.957 6.78571C125.976 6.19977 125.999 5.64313 126.025 5.11578C126.051 4.58193 126.071 4.18154 126.084 3.91461H125.996L122.314 15.0963H119.541Z"
        fill={
          theme.colorScheme === "dark"
            ? theme.colors.accent1[0]
            : theme.colors.accent2[0]
        }
      />
    </svg>
  );
};

const HistoLabels = ({ ...props }: SVGProps<SVGSVGElement>) => {
  const theme = useMantineTheme();
  const accent =
    theme.colorScheme === "dark"
      ? theme.colors.accent1[0]
      : theme.colors.accent2[0];

  return (
    <svg
      width="101"
      height="86"
      viewBox="0 0 101 86"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      {...props}
    >
      <g clipPath="url(#clip0_13_627)">
        <path
          d="M13.3943 63.8243H0.465332V85.7972H13.3943V63.8243Z"
          fill={accent}
        />
        <path
          d="M30.9436 0.438477H18.0146V85.7251H30.9436V0.438477Z"
          fill={accent}
        />
        <path
          d="M48.4928 45.5112H35.5638V85.7116H48.4928V45.5112Z"
          fill={accent}
        />
        <path
          d="M66.0421 76.5077H53.1132V85.9099H66.0421V76.5077Z"
          fill={accent}
        />
        <path
          d="M83.5913 63.8243H70.6624V85.8648H83.5913V63.8243Z"
          fill={accent}
        />
        <path
          d="M101.141 36.0865H88.2117V85.7071H101.141V36.0865Z"
          fill={accent}
        />
      </g>
      <defs>
        <clipPath id="clip0_13_627">
          <rect
            width="100.492"
            height="85.4759"
            fill="white"
            transform="translate(0.465332 0.438477)"
          />
        </clipPath>
      </defs>
    </svg>
  );
};

const Histogram = ({ ...props }: SVGProps<SVGSVGElement>) => {
  const theme = useMantineTheme();
  return (
    <>
      <div data-testid="histogram-svg">
        <HistoTitle
          style={{
            position: "absolute",
            top: 20,
            left: "50%",
            transform: "translateX(-50%)",
          }}
        />
        <HistoLabels
          style={{
            position: "absolute",
            bottom: "-4px",
            left: 79,
            height: 106,
            width: 109,
          }}
        />
      </div>
      <BGTemplate theme={theme.colorScheme} />
    </>
  );
};

export default Histogram;
